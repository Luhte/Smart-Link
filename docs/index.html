<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Link - Create Smart Music Links</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // Handle client-side routing for smart links
        if (window.location.pathname.startsWith('/l/')) {
            const linkId = window.location.pathname.split('/l/')[1];
            if (linkId) {
                window.location.href = `link.html?id=${linkId}`;
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽµ Smart Link</h1>
            <p>Create smart links for your music that work across all platforms</p>
            <p class="github-pages-note">âœ¨ Now running on GitHub Pages - No server required!</p>
        </header>

        <div class="main-content">
            <div class="create-link-section">
                <h2>Create New Smart Link</h2>
                <div class="static-note" style="background:#fffbe6;border:1px solid #ffe58f;padding:10px 15px;margin-bottom:1em;">
                    <strong>How to save your links:</strong><br>
                    After creating a smart link, copy the generated JSON and paste it into <code>links.json</code> in your repository.<br>
                    Then click <b>"Load from links.json"</b> below to view all saved links.<br>
                    <span style="color:#b37b00;">This is required for your links to persist on GitHub Pages!</span>
                </div>
                <!-- Feature.fm Import Section -->
                <div class="import-section">
                    <h3>ðŸ“¥ Import from Feature.fm</h3>
                    <p>Already have a Feature.fm link? Import it to migrate your smart link!</p>
                    <div class="import-form">
                        <input type="url" id="importUrl" placeholder="Paste your ffm.to or Feature.fm link here" class="import-input">
                        <button type="button" id="importBtn" class="import-btn">Import Link</button>
                    </div>
                    <div id="importResult" class="hidden"></div>
                    <hr class="section-divider">
                </div>
                <form id="linkForm">
                    <div class="form-group">
                        <label for="title">Song/Album Title:</label>
                        <input type="text" id="title" name="title" required placeholder="Enter song or album title">
                    </div>
                    
                    <div class="form-group">
                        <label for="artist">Artist Name:</label>
                        <input type="text" id="artist" name="artist" required placeholder="Enter artist name">
                    </div>
                    
                    <div class="form-group">
                        <label>Streaming Platforms:</label>
                        <div id="platforms">
                            <div class="platform-input">
                                <select name="platform">
                                    <option value="Spotify">Spotify</option>
                                    <option value="Apple Music">Apple Music</option>
                                    <option value="YouTube Music">YouTube Music</option>
                                    <option value="Amazon Music">Amazon Music</option>
                                    <option value="Deezer">Deezer</option>
                                    <option value="Tidal">Tidal</option>
                                    <option value="SoundCloud">SoundCloud</option>
                                    <option value="Bandcamp">Bandcamp</option>
                                    <option value="iTunes">iTunes</option>
                                </select>
                                <input type="url" name="url" placeholder="Platform URL" required>
                                <button type="button" class="remove-platform">Remove</button>
                            </div>
                        </div>
                        <button type="button" id="addPlatform">+ Add Platform</button>
                    </div>
                    
                    <button type="submit" class="create-btn">Create Smart Link</button>
                </form>
                
                <div id="result" class="result hidden"></div>
            </div>

            <div class="links-section">
                <h2>Your Smart Links</h2>
                <div style="margin-bottom: 1em;">
                    <button id="loadLinksJsonBtn" type="button">Load from links.json</button>
                    <span style="font-size: 0.95em; color: #666;">(Paste generated JSON into <code>links.json</code> in your repo, then click this button to view them.)</span>
                </div>
                <div id="linksList" class="links-list">
                    <p>Loading...</p>
                </div>
                <div id="linksJsonList" class="links-list" style="margin-top:2em;"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
